<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ä¸Šæµ·ä¸€å¤©è¡Œç¨‹ Â· äº¤äº’å¼æ‰“å¡æ¸…å•</title>
<style>
  :root{
    --bg:#0b0c10;
    --panel:#111827;
    --ink:#e7eaf3;
    --muted:#a5b3c7;
    --line:rgba(255,255,255,.1);
    --accent:#61dafb;
    --accent2:#8ef6c1;
    --danger:#ff6b6b;
    --warn:#ffd166;
    --ok:#3ad29f;
    --radius:16px;
    --shadow:0 12px 32px rgba(0,0,0,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: ui-sans-serif, -apple-system, "PingFang SC", "Microsoft YaHei", Inter, Roboto, "Helvetica Neue", Arial, "Noto Sans SC", "Segoe UI", system-ui;
    color:var(--ink);
    background:
      radial-gradient(1200px 700px at 10% -10%, #152235, transparent),
      radial-gradient(1000px 600px at 90% 0%, #101621, transparent),
      linear-gradient(180deg, #0b0f19, #0b0c10);
    line-height:1.6;
    letter-spacing:.2px;
  }
  header{
    position:sticky; top:0; z-index:10;
    backdrop-filter:saturate(160%) blur(12px);
    background:rgba(12,16,26,.6);
    border-bottom:1px solid var(--line);
  }
  .wrap{max-width:1100px; margin:0 auto; padding:16px 18px;}
  .title{display:flex; gap:14px; align-items:center; flex-wrap:wrap}
  h1{margin:0; font-size:1.55rem; letter-spacing:.5px}
  .chip{border:1px solid var(--line); color:var(--muted); padding:6px 10px; border-radius:999px; font-size:.9rem}
  .controls{margin-left:auto; display:flex; gap:10px; flex-wrap:wrap}
  button, .btn{
    display:inline-flex; align-items:center; gap:8px;
    padding:10px 14px; border-radius:12px; border:1px solid var(--line);
    background:#111827; color:var(--ink); cursor:pointer; box-shadow:var(--shadow);
    transition:transform .15s ease, border-color .2s ease, background .2s ease;
    font-weight:600;
  }
  button:hover{transform:translateY(-1px); border-color:rgba(255,255,255,.28)}
  main .grid{display:grid; grid-template-columns: 360px 1fr; gap:18px; margin-top:14px}
  @media (max-width: 980px){ main .grid{grid-template-columns:1fr} }
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
  }
  .card .inner{padding:18px}
  h2{margin:0 0 12px 0; font-size:1.2rem}
  .muted{color:var(--muted)}
  .kpi{display:grid; grid-template-columns:1fr 1fr; gap:10px}
  .kpi .box{background:#0e1524; border:1px solid var(--line); border-radius:14px; padding:10px 12px}
  .kpi strong{display:block; font-size:1.15rem}
  .bar{
    width:100%; height:12px; border-radius:999px; background:#0e1624; border:1px solid var(--line); overflow:hidden;
  }
  .bar>span{display:block; height:100%; background:linear-gradient(90deg, var(--accent), #7cf5cf); width:0%}
  .progress-row{display:flex; align-items:center; justify-content:space-between; gap:12px; margin:8px 0 0 0}
  .legend{font-variant-numeric:tabular-nums}
  .list{display:flex; flex-direction:column; gap:10px}
  .task{
    display:flex; gap:12px; padding:12px; border-radius:14px; border:1px solid var(--line); background:#0e1524;
    align-items:flex-start; transition:background .2s, border-color .2s;
  }
  .task.done{opacity:.7; background:#0d1220}
  .task .left{display:flex; align-items:flex-start; gap:10px; min-width:28px}
  .task input[type="checkbox"]{width:22px; height:22px; margin-top:2px; cursor:pointer}
  .task h3{margin:0; font-size:1.05rem}
  .task .meta{display:flex; flex-wrap:wrap; gap:8px; margin:6px 0}
  .badge{padding:4px 8px; border-radius:999px; border:1px solid var(--line); font-size:.8rem; color:var(--muted)}
  .status{padding:4px 8px; border-radius:999px; font-size:.8rem; font-weight:700}
  .status.open{background:rgba(58,210,159,.12); color:#3ad29f; border:1px solid rgba(58,210,159,.35)}
  .status.soon{background:rgba(255,209,102,.12); color:#ffd166; border:1px solid rgba(255,209,102,.35)}
  .status.closed{background:rgba(255,107,107,.12); color:#ff6b6b; border:1px solid rgba(255,107,107,.35)}
  .actions{margin-left:auto; display:flex; gap:8px; flex-wrap:wrap}
  .pill-btn{
    padding:8px 10px; border-radius:999px; border:1px solid var(--line); background:#0f1729; color:#cfe7ff; text-decoration:none; font-size:.9rem;
  }
  .pill-btn:hover{border-color:rgba(255,255,255,.3)}
  .hr{height:1px; background:linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent); margin:12px 0}
  .group-title{display:flex; align-items:center; justify-content:space-between; gap:10px}
  .sub{color:#cdd6eb; font-size:.95rem}
  .toolbar{display:flex; gap:8px; flex-wrap:wrap}
  .provider{display:flex; gap:8px; align-items:center; color:var(--muted); font-size:.9rem}
  select{background:#0e1626; color:var(--ink); border:1px solid var(--line); border-radius:10px; padding:8px 10px}
  @media (max-width:560px){ .actions{width:100%} }
</style>
</head>
<body>
<header>
  <div class="wrap title">
    <h1>ä¸Šæµ·ä¸€å¤©è¡Œç¨‹ Â· äº¤äº’å¼æ‰“å¡</h1>
    <span class="chip">æ”¯æŒåœ°å›¾å¯¼èˆª / ç”µè¯ / é¢„çº¦</span>
    <div class="controls">
      <div class="provider">
        å¯¼èˆªåº”ç”¨
        <select id="mapProvider">
          <option value="amap">é«˜å¾·</option>
          <option value="baidu">ç™¾åº¦</option>
          <option value="apple">Apple</option>
          <option value="google">Google</option>
        </select>
      </div>
      <button id="markAll">æ‰“å¡å®Œæˆ</button>
      <button id="clearAll">å…¨éƒ¨æ¸…é™¤</button>
      <button id="export">å¯¼å‡º / æ‰“å°</button>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="grid">

    <!-- å·¦ä¾§ æ¦‚è¦ä¸è¿›åº¦ -->
    <aside class="card">
      <div class="inner">
        <div class="group-title">
          <h2>ğŸ“Š è¡Œç¨‹è¿›åº¦</h2>
          <div class="legend" id="countText">0 / 0 Â· 0%</div>
        </div>
        <div class="bar" aria-label="å®Œæˆè¿›åº¦"><span id="barFill" style="width:0%"></span></div>
        <p class="sub">å‹¾é€‰ä»»ä¸€é¡¹ç›®è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°ï¼ˆlocalStorageï¼‰ï¼Œæ¢è®¾å¤‡ä¸å…±äº«ã€‚</p>

        <div class="hr"></div>
        <h2>ğŸ“ ä½¿ç”¨æç¤º</h2>
        <ul class="muted">
          <li>ç‚¹å‡»ã€Œå¯¼èˆªã€ä¼šå…ˆå¼¹å‡ºç¡®è®¤ï¼Œå†åœ¨æ‰€é€‰åœ°å›¾ App/ç½‘é¡µä¸­æ‰“å¼€ç›®çš„åœ°ã€‚</li>
          <li>è¥ä¸šçŠ¶æ€é¢œè‰²ï¼š<span class="status open">è¥ä¸šä¸­</span> <span class="status soon">å³å°†è¥ä¸š</span> <span class="status closed">å·²æ‰“çƒŠ</span>ï¼ˆæŒ‰å½“å¤©æ—¶é—´è‡ªåŠ¨åˆ¤æ–­ï¼‰ã€‚</li>
          <li>ç”µè¯æŒ‰é’®ä¼šå¼¹å‡ºç¡®è®¤ï¼Œæ‰‹æœºç«¯å¯ç›´æ¥æ‹¨æ‰“ã€‚</li>
        </ul>
      </div>
    </aside>

    <!-- å³ä¾§ åˆ—è¡¨ -->
    <section class="card">
      <div class="inner">
        <h2>ğŸ´ ç¾é£Ÿæ‰“å¡</h2>
        <div class="list" id="foodList">
          
          <!-- ä¸œæ³°ç¥¥ -->
          <article class="task" data-id="dongtaixiang" data-name="ä¸œæ³°ç¥¥" data-addr="ä¸œæ³°ç¥¥ ä¸Šæµ·" data-phone="021-12345678" data-open="07:00" data-close="21:00">
            <div class="left">
              <input type="checkbox" class="check">
            </div>
            <div class="content">
              <h3>ä¸œæ³°ç¥¥ Â· ç”Ÿç…åŒ… / è‘±æ²¹æ‹Œé¢ / è™¾è‚‰å°é¦„é¥¨</h3>
              <div class="meta">
                <span class="badge">è¥ä¸šæ—¶é—´ <span class="status" data-status></span></span>
                <span class="badge">ç”µè¯ <span data-phone>021-12345678</span></span>
              </div>
              <div class="actions">
                <a href="#" class="pill-btn nav">å¯¼èˆª</a>
                <a href="#" class="pill-btn tel">æ‹¨æ‰“ç”µè¯</a>
              </div>
            </div>
          </article>

          <!-- æç¯®æ¡¥è‘±æ²¹é¥¼ -->
          <article class="task" data-id="congyoubing" data-name="æç¯®æ¡¥è€æ‘Šå¤´è‘±æ²¹é¥¼" data-addr="æç¯®æ¡¥è€æ‘Šå¤´è‘±æ²¹é¥¼ ä¸Šæµ·" data-open="06:30" data-close="19:00">
            <div class="left"><input type="checkbox" class="check"></div>
            <div class="content">
              <h3>æç¯®æ¡¥è€æ‘Šå¤´è‘±æ²¹é¥¼</h3>
              <div class="meta">
                <span class="badge">è¥ä¸šæ—¶é—´ <span class="status" data-status></span></span>
                <span class="badge">ç”µè¯ <span data-phone>æ— </span></span>
              </div>
              <div class="actions">
                <a href="#" class="pill-btn nav">å¯¼èˆª</a>
              </div>
            </div>
          </article>

          <!-- è™¹å£ç³•å›¢ -->
          <article class="task" data-id="hongkougaotuan" data-name="ä¸Šæµ·è™¹å£ç³•å›¢" data-addr="è™¹å£ç³•å›¢ ä¸Šæµ·" data-open="08:00" data-close="20:00">
            <div class="left"><input type="checkbox" class="check"></div>
            <div class="content">
              <h3>ä¸Šæµ·è™¹å£ç³•å›¢ Â· å…¨å®¶ç¦</h3>
              <div class="meta">
                <span class="badge">è¥ä¸šæ—¶é—´ <span class="status" data-status></span></span>
              </div>
              <div class="actions">
                <a href="#" class="pill-btn nav">å¯¼èˆª</a>
              </div>
            </div>
          </article>

          <!-- è‰è² -->
          <article class="task" data-id="lilian" data-name="è‰è²è›‹æŒ" data-addr="è‰è²è›‹æŒ ä¸Šæµ·" data-open="10:00" data-close="22:00">
            <div class="left"><input type="checkbox" class="check"></div>
            <div class="content">
              <h3>è‰è² Â· èŠå£«è›‹æŒ</h3>
              <div class="meta">
                <span class="badge">è¥ä¸šæ—¶é—´ <span class="status" data-status></span></span>
              </div>
              <div class="actions">
                <a href="#" class="pill-btn nav">å¯¼èˆª</a>
              </div>
            </div>
          </article>

          <!-- æ —å…¶ -->
          <article class="task" data-id="liqi" data-name="æ —å…¶å¥¶èŒ¶" data-addr="æ —å…¶ å¥¶èŒ¶ ä¸Šæµ·" data-open="10:00" data-close="21:30">
            <div class="left"><input type="checkbox" class="check"></div>
            <div class="content">
              <h3>æ —å…¶ Â· èœ‚å·¢ç„¦ç³–é²œç‰›ä¹³èŒ¶ï¼ˆé‡‘éªçœ‰èŒ¶åº•ï¼‰</h3>
              <div class="meta">
                <span class="badge">è¥ä¸šæ—¶é—´ <span class="status" data-status></span></span>
              </div>
              <div class="actions">
                <a href="#" class="pill-btn nav">å¯¼èˆª</a>
              </div>
            </div>
          </article>

          <!-- é™†ä¸èŠ¬ -->
          <article class="task" data-id="lusifen" data-name="é™†ä¸èŠ¬è±†èŠ±" data-addr="é™†ä¸èŠ¬ è±†èŠ± ä¸Šæµ·" data-open="11:00" data-close="21:00">
            <div class="left"><input type="checkbox" class="check"></div>
            <div class="content">
              <h3>é™†ä¸èŠ¬ Â· å†°æ¸£è±†èŠ±</h3>
              <div class="meta">
                <span class="badge">è¥ä¸šæ—¶é—´ <span class="status" data-status></span></span>
              </div>
              <div class="actions">
                <a href="#" class="pill-btn nav">å¯¼èˆª</a>
              </div>
            </div>
          </article>

          <!-- ç”œå¾—ç¦ -->
          <article class="task" data-id="tiandefu" data-name="ç”œå¾—ç¦" data-addr="ç”œå¾—ç¦ ä¸Šæµ·" data-open="11:00" data-close="22:00">
            <div class="left"><input type="checkbox" class="check"></div>
            <div class="content">
              <h3>ç”œå¾—ç¦ Â· å››æœæ±¤</h3>
              <div class="meta">
                <span class="badge">è¥ä¸šæ—¶é—´ <span class="status" data-status></span></span>
              </div>
              <div class="actions">
                <a href="#" class="pill-btn nav">å¯¼èˆª</a>
              </div>
            </div>
          </article>

        </div>

        <div class="hr"></div>
        <h2>ğŸ’† æŠ¤ç† / ğŸ›ï¸ è´­ç‰©</h2>

        <div class="list" id="serviceList">
          <!-- çš®è‚¤ç®¡ç† -->
          <article class="task" data-id="skin" data-name="çš®è‚¤ç®¡ç†" data-addr="çš®è‚¤ç®¡ç† ä¸Šæµ·" data-open="10:00" data-close="21:00">
            <div class="left"><input type="checkbox" class="check"></div>
            <div class="content">
              <h3>çš®è‚¤ç®¡ç†</h3>
              <div class="meta">
                <span class="badge">è¥ä¸šæ—¶é—´ <span class="status" data-status></span></span>
                <span class="badge"><a class="pill-btn" href="https://example.com/skin" target="_blank">é¢„çº¦</a></span>
              </div>
              <div class="actions">
                <a href="#" class="pill-btn nav">å¯¼èˆª</a>
              </div>
            </div>
          </article>

          <!-- ç¾ç”² -->
          <article class="task" data-id="nails" data-name="ç¾ç”²" data-addr="ç¾ç”² ä¸Šæµ·" data-open="10:00" data-close="21:00">
            <div class="left"><input type="checkbox" class="check"></div>
            <div class="content">
              <h3>ç¾ç”²</h3>
              <div class="meta">
                <span class="badge">è¥ä¸šæ—¶é—´ <span class="status" data-status></span></span>
                <span class="badge"><a class="pill-btn" href="https://example.com/nails" target="_blank">é¢„çº¦</a></span>
              </div>
              <div class="actions">
                <a href="#" class="pill-btn nav">å¯¼èˆª</a>
              </div>
            </div>
          </article>

          <!-- Apple Watch -->
          <article class="task" data-id="applewatch" data-name="Apple Store iapm" data-addr="Apple iapm ä¸Šæµ·" data-phone="400-6171-888" data-open="10:00" data-close="22:00">
            <div class="left"><input type="checkbox" class="check"></div>
            <div class="content">
              <h3>è´­ä¹° Apple Watchï¼ˆApple iapmï¼‰</h3>
              <div class="meta">
                <span class="badge">è¥ä¸šæ—¶é—´ <span class="status" data-status></span></span>
                <span class="badge">ç”µè¯ <span data-phone>400-6171-888</span></span>
                <span class="badge"><a class="pill-btn" href="https://www.apple.com.cn/retail/iapm/" target="_blank">é¢„çº¦</a></span>
              </div>
              <div class="actions">
                <a href="#" class="pill-btn nav">å¯¼èˆª</a>
                <a href="#" class="pill-btn tel">æ‹¨æ‰“ç”µè¯</a>
              </div>
            </div>
          </article>
        </div>

      </div>
    </section>
  </div>
</main>

<script>
/* ====== å·¥å…·å‡½æ•° ====== */
const $ = (sel, ctx=document) => ctx.querySelector(sel);
const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

function timeToMinutes(t){ // "HH:MM" -> minutes
  const [H,M] = t.split(':').map(Number);
  return H*60 + M;
}
function getNowMinutes(){
  const now = new Date();
  return now.getHours()*60 + now.getMinutes();
}
function computeStatus(openStr, closeStr){
  const now = getNowMinutes();
  const open = timeToMinutes(openStr);
  const close = timeToMinutes(closeStr);
  const SOON_WIN = 60; // 60åˆ†é’Ÿå†…å°†è¥ä¸š
  if(now >= open && now < close) return {cls:'open', text:'è¥ä¸šä¸­'};
  if(now < open && (open - now) <= SOON_WIN) return {cls:'soon', text:'å³å°†è¥ä¸š'};
  return {cls:'closed', text:'å·²æ‰“çƒŠ'};
}
function buildMapUrl(provider, name){
  const q = encodeURIComponent(name);
  switch(provider){
    case 'amap':  return `https://www.amap.com/search?query=${q}`;
    case 'baidu': return `https://api.map.baidu.com/geocoder?address=${q}&output=html`;
    case 'apple': return `https://maps.apple.com/?q=${q}`;
    default:      return `https://www.google.com/maps/search/?api=1&query=${q}`;
  }
}

/* ====== åˆå§‹åŒ–çŠ¶æ€å¾½ç«  ====== */
function refreshStatuses(){
  $$('.task').forEach(task=>{
    const open = task.dataset.open || '00:00';
    const close = task.dataset.close || '23:59';
    const badge = $('[data-status]', task);
    if(!badge) return;
    const st = computeStatus(open, close);
    badge.textContent = `${st.text}ï¼ˆ${open}â€“${close}ï¼‰`;
    badge.className = `status ${st.cls}`;
  });
}

/* ====== è¿›åº¦æ¡ & è®¡æ•° ====== */
function updateProgress(){
  const boxes = $$('.check');
  const checked = boxes.filter(b=>b.checked).length;
  const total = boxes.length;
  const pct = total ? Math.round(checked/total*100) : 0;
  $('#barFill').style.width = pct + '%';
  $('#countText').textContent = `${checked} / ${total} Â· ${pct}%`;
}

/* ====== æ‰“å¡æœ¬åœ°å­˜å‚¨ ====== */
function restoreChecks(){
  $$('.task').forEach(task=>{
    const id = task.dataset.id;
    const box = $('.check', task);
    const saved = localStorage.getItem('sh-trip-' + id);
    if(saved === '1'){ box.checked = true; task.classList.add('done'); }
  });
}
function wireCheckHandlers(){
  $$('.check').forEach(box=>{
    box.addEventListener('change', e=>{
      const task = e.target.closest('.task');
      const id = task.dataset.id;
      localStorage.setItem('sh-trip-' + id, box.checked ? '1' : '0');
      task.classList.toggle('done', box.checked);
      updateProgress();
    });
  });
}

/* ====== åŠ¨ä½œæŒ‰é’®ï¼šå¯¼èˆª/ç”µè¯ ====== */
function wireActionButtons(){
  const providerSel = $('#mapProvider');
  $$('.nav').forEach(btn=>{
    btn.addEventListener('click', e=>{
      e.preventDefault();
      const task = e.target.closest('.task');
      const name = task.dataset.addr || task.dataset.name;
      const provider = providerSel.value;
      if(confirm(`å¯¼èˆªåˆ°ã€Œ${task.dataset.name}ã€ï¼Ÿ\nï¼ˆå°†ä½¿ç”¨ ${providerSel.options[providerSel.selectedIndex].text} æ‰“å¼€ï¼‰`)){
        const url = buildMapUrl(provider, name);
        window.open(url, '_blank');
      }
    });
  });
  $$('.tel').forEach(btn=>{
    btn.addEventListener('click', e=>{
      e.preventDefault();
      const task = e.target.closest('.task');
      const phone = $('[data-phone]', task)?.textContent?.trim();
      if(phone && phone !== 'æ— '){
        if(confirm(`æ‹¨æ‰“ç”µè¯ï¼š${phone} ï¼Ÿ`)){
          window.location.href = 'tel:' + phone.replace(/[^+\d]/g,'');
        }
      }else{
        alert('è¯¥åœ°ç‚¹æš‚æ— ç”µè¯å·ç ');
      }
    });
  });
}

/* ====== é¡¶éƒ¨å·¥å…·æ  ====== */
$('#markAll').addEventListener('click', ()=>{
  $$('.task').forEach(task=>{
    const box = $('.check', task);
    box.checked = true;
    task.classList.add('done');
    localStorage.setItem('sh-trip-' + task.dataset.id, '1');
  });
  updateProgress();
});
$('#clearAll').addEventListener('click', ()=>{
  if(!confirm('ç¡®å®šæ¸…é™¤æ‰€æœ‰æ‰“å¡è¿›åº¦å—ï¼Ÿ')) return;
  $$('.task').forEach(task=>{
    const box = $('.check', task);
    box.checked = false;
    task.classList.remove('done');
    localStorage.setItem('sh-trip-' + task.dataset.id, '0');
  });
  updateProgress();
});
$('#export').addEventListener('click', ()=>{ window.print(); });

/* ====== é¦–æ¬¡æ¸²æŸ“ ====== */
restoreChecks();
wireCheckHandlers();
wireActionButtons();
refreshStatuses();
updateProgress();

/* ====== æ¯åˆ†é’Ÿåˆ·æ–°è¥ä¸šçŠ¶æ€ ====== */
setInterval(refreshStatuses, 60*1000);
</script>
</body>
</html>
